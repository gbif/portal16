.container--normal {
    padding-left 15px
    padding-right 15px
    margin-right auto
    margin-left auto
    max-width $contentWidth--normal
}

.container--desktop {
    @extend .container--normal
    max-width $desktop
}

.container--desktop--snap-to-edges {
    @extend .container--desktop
    padding-left 0
    padding-right 0
}

+isAbove($desktop) {
    .container--desktop--snap-to-edges {
        padding-left 15px
        padding-right 15px
    }
}

.container--wide {
    @extend .container--normal
    max-width $contentWidth--wide
}

.container--narrow {
    @extend .container--normal
    max-width $contentWidth--narrow
}

.wrapper-horizontal-stripes {
    > .horizontal-stripe, > .horizontal-stripe--paddingless {
        &.article-header {
            border none
            &--tabbed {
                padding-bottom 0
                header {
                    padding-bottom vrBlock(1)
                }
            }
        }
        &.white-background + .light-background, &.light-background + .white-background {
            border-top 1px solid $stripeBorderColor
        }
        //&.light-background + .light-background {
        //    border none
        //}
        //&.bare-background + .bare-background {
        //    border none
        //}
        //&.light-background:last-of-type {
        //    border-bottom 1px solid $stripeBorderColor
        //}
        > *:last-of-type {
            margin-bottom 0
        }
    }
}

.horizontal-stripe {
    padding vrBlock(1.5) 0
}

.horizontal-stripe--paddingless {
    padding 0
}

/*
 * Header area styles
 */
.article-header {
    //&.horizontal-stripe {
    //    padding vrBlock(2.5) 0
    //}
    > * last-child {
        margin-bottom 0
    }
    h1 {
        text-align center
        margin-top vrBlock(0.4)
        .error {
            color tomato
        }
    }
    &__intro {
        font-size 18px
        font-style italic
        font-family $didot
        max-width 700px
        text-align center
        margin 0 auto vrBlock(0.5) auto
    }
    &__meta {
        font-weight bold
        display inline-block
        //> * {
        //    margin 0 //necessary because the drupal api sometimes returns a paragraph tag ; we aren't safe printing. this shouldn't matter. have uncommented
        //}
        
    }
    &__sub {
        margin-top vrBlock(0.5)
    }
    &--programme {
        margin-top vrBlock(1)
        margin-bottom vrBlock(1)
    }
    &--project {
        margin-bottom vrBlock(1)
    }
}

/*
 * Header - page level navigation
 */
$articleCategorySeparatorSpacing = 6px
.article-header__category {
    overflow hidden
    white-space nowrap
    text-overflow ellipsis
    margin 0 auto
    text-align center
    text-transform uppercase
    font-weight bold
    font-size round(0.85 * $htmlFontSize)
    > *:last-child {
        font-weight 600
    }
    a {
        color inherit
        &:hover {
            color $orangePeel
            text-decoration none
        }
    }
    .article-header__category__lower {
        border-left 2px solid $orangePeel
        margin-left $articleCategorySeparatorSpacing
        padding-left ($articleCategorySeparatorSpacing + 2)
    }
    &.article-header__category--deep {
        text-align left
        .article-header__category__upper {
            display inline-block
            width s('calc(50% - %s)', $articleCategorySeparatorSpacing * 2)
            text-align right
        }
    }
}

//TODO isn't used it seems
.article-header__field {
    display inline-block
    padding 10px 20px
    text-align center
    margin 10px 0
    vertical-align middle
    div {
        display inline-block
        vertical-align middle
    }
    img {
        height 60px
        margin-right 8px
    }
}

//TODO isn't used it seems
.header-short-text {
    max-width 800px
    margin 0 auto
}

.paragraph-label {
    font-weight bold
    color $gray60
}

//TODO isn't used it seems
.section-map {
    position relative
    z-index 10
    height 350px
    padding 0 0
    a {
        color @gray-base
    }
}
//TODO isn't used it seems
.block-map {
    height 100%
    > div:last-child:after {
        content ''
        position absolute
        box-shadow inset 0 6px 6px -6px rgba(0, 0, 0, 0.3), inset 0 -6px 6px -6px rgba(0, 0, 0, 0.3)
        width 100%
        height 100%
        display block
        pointer-events none
    }
}

.container--prose {
    max-width $contentWidth--narrow
    margin-left auto
    margin-right auto

    .prose-columns {
        overflow-wrap break-word
        word-wrap break-word
        hyphens auto
        margin-bottom vrBlock(1)
        section {
            break-inside avoid-column
        }
        .block--non-breaking {
            break-inside avoid-column
        }
    }
}

+isAbove($contentWidth--narrow) {
    .container--prose {
        max-width $contentWidth--normal
        .prose-columns {
            columns 2 30px
            &--single-col {
                margin 0 auto 0 auto
                orphans 100
            }
            &--justified {
                text-align justify
            }
        }
    }
}

.prose {
    ul, ol {
        margin-bottom vrBlock(1)
    }
    ul {
        list-style disc
    }
    ol {
        list-style decimal
    }
}
.body-text {
    @extends .prose
    font-size 16px
    line-height 1.5
    font-weight normal

    > h1:first-child, > h2:first-child, > h3:first-child, > h4:first-child {
        margin-top 0px
    }

    strong {
        font-weight bold
    }

    h1, h2 {
        font-weight 300
        font-size 30px
        color #8496ab
        margin 80px 0 60px 0
    }

    h1 {
        font-size 38px
    }

    h3 {
        font-weight 400
        color #58687b //#75879c
        font-size 25px
        margin-top 45px
        margin-bottom 15px
    }
    h4 {
        margin-top 30px
        margin-bottom 10px
        font-weight 500
        font-size 16px
        color #75879c //#586579
    }
    p {
        margin-bottom 1.5em
    }
    figure {
        overflow hidden
        break-inside avoid-column
        margin-bottom vrBlock(1)
        figcaption {
            font-size 0.9rem
            font-weight 300
            color $citationTextColor
        }
    }
}

.body-text--markdown {
    @extends .body-text
}

.article-auxiliary {
    padding-top vrBlock(1)
    margin-top vrBlock(2)
    margin-bottom -10px //to compensate for the bottom border on the sections.
    border-top 1px solid $stripeBorderColor
    font-size round(0.85 * $htmlFontSize)
    color $gray63

    section {
        border-bottom solid 5px transparent //to imitate paragraphs without margin leakage to next column
        h5 {
            //font-weight 500
            margin-right 0.5em
            margin-bottom 0.3em
            &:after {
                content: ":"
            }
        }
    }

}

$headerImageMaxFullWidth = $desktop
.heading-image {
    max-width $headerImageMaxFullWidth
    margin 0 auto
    figcaption {
        font-size 0.9rem
        font-weight 300
        color $citationTextColor
        > * {
            margin 0
        }
    }
}

+isAbove($headerImageMaxFullWidth) {
    .heading-image {
        max-width $headerImageMaxFullWidth
        .cover-image {
            margin 0 $halfGutter
            background-size initial
        }
    }
}

.cover-image {
    height 0
    padding-bottom 50%
    background #f7f9fa
    overflow hidden
    background-size cover
    background-position center
    background-repeat no-repeat
    border 1px solid $stripeBorderColor
    img {
        display none
    }
    &.isInvalid {
        background-size initial
    }
}

+isAbove($mobile) {
    .cover-image {
        padding-bottom 42%
    }
}

+isAbove($tablet) {
    .cover-image {
        padding-bottom 35%
    }
}

.card-image {
    height 0
    padding-bottom 50%
    background #f7f9fa
    overflow hidden
    background-size cover
    background-position center
    img {
        display none
    }
}

.inline-bullet-list {
    display inline
    padding 0
    li {
        display inline-block
        margin 0 2px
        &:after {
            font-style normal
            content '\25CF' // ‚ùØ
            font-size 80%
        }
        &:last-of-type:after {
            content '';
        }
    }
    &--discreet {
        color #ddd
        a {
            color #666
        }
    }
}

.article-image {
    padding-bottom 60%
}

.resource-image {
    max-width 240px
}

.sidebar {
    .sidebar__item:first-of-type {
        border-top 1px solid $stripeBorderColor
        border-bottom none
    }
    .sidebar__item {
        border-bottom 1px solid $stripeBorderColor
        margin-bottom vrBlock(1)
        img {
            width 100%
        }
    }

    .sidebar__item:last-of-type {
        border-bottom none
    }
}

.entity-summary {
    &__row {
        border-bottom 1px solid $stripeBorderColor
        padding-bottom vrBlock(1)
    }
    &__row:last-of-type {
        border-bottom none
    }
    &__image {
        display inline-block
        vertical-align top
        margin 10px 10px 10px 0px
        padding-top 5px
        width 100px
        height 100px
    }
    &__text {
        display inline-block
        width 65%
    }
    &__summary {
        display none
    }
}

+isAbove($tablet) {
    .entity-summary {
        &__text {
            width 82%
        }
        &__summary {
            display block
        }
    }
}

+isAbove($tablet) {
    // .count-text {
    //     text-align left
    // }
    .card {
        margin 0 0
    }
}

+isBelow($tablet) {
    .publisher {
        overflow-wrap break-word
    }
    // .count-text {
    //     text-align center
}

ul.list-style-none {
    list-style none
    padding-left vrBlock(1)
}

//@todo to arrange this in _typography.styl ?
sup, sub {
    vertical-align baseline
    position relative
    top -0.4rem
}

sub {
    top 0.4rem
}

.action-notice--visible {
    padding 1px 6px 1px 8px
    left 0
    background-color $actionColor
    color white
    opacity 1
    transition opacity 0.5s linear
}

.action-notice--hidden {
    left 0
    opacity 0
    transition opacity 0.5s linear
}

.related-news--programme {
    font-size 14px
    line-height 18px
    margin-bottom vrBlock(1)
}

.relative-anchor-offset {
    position relative
    > a {
        position absolute
        top -($navBar_height)
    }
}

.relative-anchor-offset--tabs {
    @extends .relative-anchor-offset
    > a {
        top -($navBar_height + vrBlock(3))
    }
}

.anchor-block {
    &:before {
        display block
        content " "
        height $navBar_height
        margin-top -($navBar_height)
        visibility hidden
        z-index -999
        position relative
    }
}

.anchor-block--tabs {
    @extends .anchor-block
    &:before {
        height $navBar_height + $searchTabBar-height //todo parameterize tab bar?
        margin-top -($navBar_height + $searchTabBar-height)
    }
    &.click-through {
        pointer-events none
    }
}

.anchor-block__above {
    position relative
    z-index 100
}

.seperator {
    border-top 1px solid $stripeBorderColor !important
    &--b {
        border-bottom 1px solid rgba(0, 0, 0, 0.08) !important
    }
}

.ct-chart > svg:not(:root) {
    overflow visible
}

//.dashboard {
//    font-size 14px
//}

.discreet-comment {
    color $discreetInk
    font-style italic
}

.bg-attached {
    background-attachment fixed
}

.isTouch .bg-attached {
    background-attachment initial
}

.bordered {
    border 1px solid $stripeBorderColor
}

.text-brand-color {
    color $navBar_background_color
}

.text-error {
    color tomato
}
.text-italic {
    font-style italic
}

.content__overlay {
    display block
    position fixed
    top $navBar_height
    bottom 0
    left 0
    right 0
    background rgba(0,0,0,.2)
    z-index $zContentOverlay
    &__card {
        background white
        width 500px
        max-width 100%
        max-height 100%
        overflow hidden
        margin auto
        position absolute
        left 0
        right 0
        top 2rem
        box-shadow 0 3px 2px rgba(0, 0, 0, 0.2)
        display flex
        flex-direction column
        font-size 14px
        &__header {
            flex 0 0 auto
            padding 10px
            text-align center
        }
        &__list {
            flex 1 1 auto
            overflow auto
            ul {
                padding 0
            }
            li {
                &:nth-of-type(even) {
                    background $alternativeTableRow
                }
                &:hover {
                    background darken($alternativeTableRow, 5)
                }
            }
            a {
                display block
                padding 10px 20px
                div>span {
                    margin-right 10px
                }
            }
        }
    }
}
.page__overlay {
    @extends .content__overlay
    z-index $zPageOverlay
}
+isAbove($tablet) {
    .content__overlay {
        &__card {
            max-height calc(100% - 2rem)
            left calc(50% - 250px)
            top 1rem
        }
    }
}

.text-green {
    color $navBar_background_color
}

.header-anchor {
    visibility hidden
}
h1, h2, h3, h4, h5, h6 {
    &:hover > .header-anchor {
        visibility visible
    }
}

.error-block {
    display inline-block
    margin-top 10px
    background tomato
    color white
    padding 10px
}